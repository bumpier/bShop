# bShop Configuration
# This file contains the core configuration for bShop plugin.

# =============================================================================
# DATABASE CONFIGURATION
# =============================================================================
database:
  # Database type: "SQLite" (default) or "MySQL"
  type: "SQLite"
  
  # MySQL configuration (only used if type is "MySQL")
  mysql:
    host: "localhost"
    port: 3306
    database: "bshop"
    username: "user"
    password: "password"

# =============================================================================
# PERMISSION-BASED SELL PRICE MULTIPLIERS
# =============================================================================
multipliers:
  # Enable permission-based sell price multipliers
  enabled: true
  
  # Maximum multiplier value (prevents extreme values)
  max_multiplier: 5.0
  
  # Stack multipliers: true = add all applicable multipliers, false = use highest only
  stack_multipliers: false
  
  # Permission-based multipliers
  # Format: permission_node: multiplier_value
  # Examples:
  # bshop.multiplier.0.8: 0.8  # 20% discount on sell prices
  # bshop.multiplier.1.2: 1.2  # 20% bonus on sell prices
  permission_multipliers:
    "bshop.multiplier.0.8": 0.8
    "bshop.multiplier.0.9": 0.9
    "bshop.multiplier.1.1": 1.1
    "bshop.multiplier.1.2": 1.2
    "bshop.multiplier.1.5": 1.5

# =============================================================================
# LOGGING CONFIGURATION
# =============================================================================
logging:
  # Enable transaction logging
  enabled: true
  
  # Enable log rotation
  rotate: true
  
  # Maximum file size in MB before rotation
  max_file_size_mb: 10
  
  # Maximum number of backup files to keep
  max_backup_files: 5

# =============================================================================
# ALERTS & NOTIFICATIONS
# =============================================================================
alerts:
  # Enable transaction alerts
  enabled: true
  
  # Minimum transaction value to trigger alerts
  threshold: 100.0
  
  # Permission required to receive alerts
  permission: "bshop.alert"
  
  # In-game alert message
  message: "%prefix%<green>%player% %type% <aqua>%amount%x %item_id%</aqua> for <gold>$%price%</gold>."
  
  # Discord webhook URL (leave empty to disable)
  discord_webhook_url: "WEBHOOK_URL_HERE"
  
  # Discord webhook payload template
  discord_payload: |
    {
      "username": "bShop Alerts",
      "avatar_url": "https://cdn-icons-png.flaticon.com/512/3523/3523887.png",
      "content": "",
      "embeds": [
        {
          "title": "Shop Alert",
          "description": "**%player%** %type% **%amount%x %item_id%** for **$%price%**",
          "color": 16711680,
          "fields": [
            { "name": "Player", "value": "%player%", "inline": true },
            { "name": "Type", "value": "%type%", "inline": true },
            { "name": "Amount", "value": "%amount%", "inline": true },
            { "name": "Item", "value": "%item_id%", "inline": true },
            { "name": "Price", "value": "$%price%", "inline": true },
            { "name": "Shop", "value": "%shop%", "inline": true }
          ],
          "footer": {
            "text": "bShop Transaction Alert"
          },
          "timestamp": "%date%"
        }
      ]
    }

# Add performance configuration section
performance:
  # Database connection pool settings (MySQL only)
  database:
    connection_pool_size: 20
    minimum_idle: 5
    connection_timeout: 30000
    idle_timeout: 600000
    max_lifetime: 1800000
    leak_detection_threshold: 60000
  
  # Caching settings
  caching:
    enabled: true
    shop_cache_duration: 300000  # 5 minutes
    player_data_cache_duration: 60000  # 1 minute
    max_cached_shops: 100
    max_cached_players: 1000
  
  # Async processing
  async:
    transaction_threads: 4
    shop_loading_threads: 2
    gui_update_threads: 2
  
  # Memory optimization
  memory:
    cleanup_interval: 300000  # 5 minutes
    max_recent_transactions: 50
    batch_size: 100
    gui_update_cooldown: 100  # milliseconds
    inventory_check_cooldown: 500  # milliseconds
    transaction_cooldown: 100  # milliseconds

